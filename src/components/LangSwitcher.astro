---
import { localizePath } from 'astro-i18next';
import i18next from 'i18next';

const currentUrl = Astro.url.pathname;
const currentLanguage = i18next.language || 'vi';
---

<div class="language-switcher">
  <select onchange="setTimeout(() => { window.location.href = this.value }, 100)">
    <option value={localizePath(currentUrl, 'en')} selected={currentLanguage === 'en'}> English </option>
    <option value={localizePath(currentUrl, 'vi')} selected={currentLanguage === 'vi'}> Vietnamese </option>
  </select>
</div>

<style>
  .language-switcher {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 1rem 0;
  }

  /* Custom the dropdown arrow icon of select */
  .language-switcher > select {
    display: flex;
    justify-content: space-between;
    gap: 0.25rem;
    min-width: max-content;
    padding-block: 2px;
    padding-inline: 8px;
    border: 3px solid var(--orange);
    position: relative;
    cursor: pointer;
    border-radius: 1rem;
    font-family: var(--ff-primary);
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image: url('data:image/svg+xml;utf8,<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M19 9l-7 7-7-7"></path></svg>');
    background-repeat: no-repeat;
    background-position: right 0.5rem top 50%;
    background-size: 1rem;
    padding-inline-end: 1.5rem;
    &:hover,
    &:focus,
    &:active {
      outline-color: var(--orange);
      border-color: var(--orange);
      box-shadow: 0 0 0 0.2rem rgba(255, 165, 0, 0.25);
    }
  }
</style>
